<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Auralis</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
  </head>
  <body>
    <!-- Piano Illustration - Bottom Left -->
    <div class="illustration illustration-left" aria-hidden="true">
      <img
        src="{{ url_for('static', filename='images/piano-illustration.png') }}"
        alt=""
      />
    </div>

    <!-- Tabla Illustration - Bottom Right -->
    <div class="illustration illustration-right" aria-hidden="true">
      <img
        src="{{ url_for('static', filename='images/tabla-illustration.png') }}"
        alt=""
      />
    </div>

    <!-- Floating Musical Notes Background -->
    <div class="floating-notes" aria-hidden="true"></div>

    <div class="app-container">
      <!-- Header -->
      <header class="header">
        <div class="header-inner">
          <div class="logo-group">
            <div class="logo-icon">
              <span>A</span>
            </div>
            <span class="logo-text">Auralis</span>
          </div>
          <p class="header-tagline">AI-Powered Music Generation</p>
        </div>
      </header>

      <!-- Main Content -->
      <main class="main">
        <!-- Hero Section -->
        <div class="hero">
          <h1 class="hero-title">Create Music with AI</h1>
          <p class="hero-subtitle">
            Describe your perfect soundtrack and let our AI compose it for you.
            From ambient soundscapes to energetic beats.
          </p>
        </div>

        <!-- Generator Card -->
        <div class="generator-card">
          <form id="form" class="form" method="post" action="#" novalidate>
            <textarea
              id="prompt"
              name="prompt"
              class="prompt-input"
              rows="4"
              placeholder="Describe your perfect soundtrack... (e.g., 'peaceful piano melody for studying')"
              maxlength="500"
            ></textarea>

            <div class="form-footer">
              <p class="form-hint">
                Press Enter to generate or Shift+Enter for new line
              </p>
              <button type="submit" id="submit" class="btn-generate">
                <svg
                  class="sparkle-icon"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    d="M12 3l1.912 5.813a2 2 0 001.275 1.275L21 12l-5.813 1.912a2 2 0 00-1.275 1.275L12 21l-1.912-5.813a2 2 0 00-1.275-1.275L3 12l5.813-1.912a2 2 0 001.275-1.275L12 3z"
                  />
                </svg>
                Generate
              </button>
            </div>

            <!-- Hidden selects for duration and model (keeping functionality) -->
            <input type="hidden" id="duration" name="duration" value="30" />
            <input
              type="hidden"
              id="model"
              name="model_version"
              value="melody"
            />
          </form>

          <!-- Loading Overlay -->
          <div id="loading" class="loading-overlay hidden" aria-live="polite">
            <div class="loader-content">
              <!-- Musical Staff with Notes -->
              <div class="staff-container">
                <div class="staff-lines">
                  <div class="staff-line"></div>
                  <div class="staff-line"></div>
                  <div class="staff-line"></div>
                  <div class="staff-line"></div>
                  <div class="staff-line"></div>
                </div>
                <div class="treble-clef">ùÑû</div>
                <div class="floating-staff-notes">
                  <span class="staff-note" style="--delay: 0s; --x: -40px"
                    >‚ô™</span
                  >
                  <span class="staff-note" style="--delay: 0.3s; --x: 0px"
                    >‚ô´</span
                  >
                  <span class="staff-note" style="--delay: 0.6s; --x: 40px"
                    >‚ô©</span
                  >
                  <span class="staff-note" style="--delay: 0.9s; --x: -20px"
                    >‚ô¨</span
                  >
                  <span class="staff-note" style="--delay: 1.2s; --x: 20px"
                    >‚ô™</span
                  >
                </div>
              </div>

              <!-- Sound Wave Equalizer -->
              <div class="equalizer">
                <span class="eq-bar"></span>
                <span class="eq-bar"></span>
                <span class="eq-bar"></span>
                <span class="eq-bar"></span>
                <span class="eq-bar"></span>
                <span class="eq-bar"></span>
                <span class="eq-bar"></span>
                <span class="eq-bar"></span>
                <span class="eq-bar"></span>
              </div>

              <!-- Loading Text -->
              <div class="loading-text-group">
                <p class="loading-text">Composing your melody</p>
                <div class="loading-dots">
                  <span class="dot"></span>
                  <span class="dot"></span>
                  <span class="dot"></span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Result Card -->
        <div id="result" class="result-card hidden">
          <h3 class="result-title">Generated Music</h3>

          <!-- Waveform Visualization -->
          <div class="waveform" id="waveform"></div>

          <!-- Progress Bar -->
          <div class="progress-container">
            <div
              class="progress-bar"
              id="progressBar"
              role="slider"
              tabindex="0"
              aria-valuemin="0"
              aria-valuemax="100"
              aria-valuenow="0"
              aria-label="Seek"
            >
              <div class="progress-fill" id="progressFill"></div>
              <div class="progress-thumb" id="progressThumb"></div>
            </div>
            <div class="time-display">
              <span id="currentTime" class="time">0:00</span>
              <span id="durationTime" class="time">0:00</span>
            </div>
          </div>

          <!-- Player Controls -->
          <div class="player-controls">
            <div class="volume-control">
              <button
                type="button"
                id="volumeBtn"
                class="icon-btn"
                aria-label="Mute"
              >
                <svg
                  class="icon-volume"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" />
                  <path d="M15.54 8.46a5 5 0 0 1 0 7.07" />
                  <path d="M19.07 4.93a10 10 0 0 1 0 14.14" />
                </svg>
                <svg
                  class="icon-muted hidden"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" />
                  <line x1="23" y1="9" x2="17" y2="15" />
                  <line x1="17" y1="9" x2="23" y2="15" />
                </svg>
              </button>
              <input
                type="range"
                id="volume"
                class="volume-slider"
                min="0"
                max="100"
                value="100"
                aria-label="Volume"
              />
            </div>

            <button
              type="button"
              id="playPause"
              class="play-btn"
              aria-label="Play"
            >
              <svg
                class="icon-play"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path d="M8 5v14l11-7z" />
              </svg>
              <svg
                class="icon-pause hidden"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
              </svg>
            </button>

            <a
              id="download"
              class="icon-btn download-btn"
              href="#"
              download="auralis-generated.mp3"
              aria-label="Download MP3"
            >
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                <polyline points="7 10 12 15 17 10" />
                <line x1="12" y1="15" x2="12" y2="3" />
              </svg>
            </a>
          </div>

          <audio id="player" class="player-audio" preload="metadata"></audio>
        </div>

        <!-- Error Message -->
        <div id="error" class="error-message hidden" role="alert"></div>

        <!-- Feature Cards -->
        <div class="features">
          <div class="feature">
            <div class="feature-icon">
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <rect x="3" y="3" width="7" height="7" rx="1" />
                <rect x="14" y="3" width="7" height="7" rx="1" />
                <rect x="14" y="14" width="7" height="7" rx="1" />
                <rect x="3" y="14" width="7" height="7" rx="1" />
              </svg>
            </div>
            <h3 class="feature-title">Any Style</h3>
            <p class="feature-desc">Piano, electronic, orchestral, ambient</p>
          </div>
          <div class="feature">
            <div class="feature-icon feature-icon-accent">
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" />
              </svg>
            </div>
            <h3 class="feature-title">Fast Generation</h3>
            <p class="feature-desc">High-quality tracks in seconds</p>
          </div>
          <div class="feature">
            <div class="feature-icon">
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"
                />
                <polyline points="17 21 17 13 7 13 7 21" />
                <polyline points="7 3 7 8 15 8" />
              </svg>
            </div>
            <h3 class="feature-title">Download & Use</h3>
            <p class="feature-desc">Export your creations instantly</p>
          </div>
        </div>
      </main>
    </div>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
  </body>
</html>
